'\" t
.\" Automatically generated by Pandoc 3.1.8
.\"
.TH "WIDERIVER" "1" "2024/05/28" "wideriver" "User Manuals"
.SH NAME
\f[CR]wideriver\f[R] - tiling window manager for the river wayland compositor
.SH SYNOPSIS
\f[CR]wideriver\f[R] [\f[I]OPTION\f[R]\&...|\f[I]COMMAND\f[R]\&...]
.SH DESCRIPTION
Tiling window manager for the river (https://github.com/riverwm/river) wayland compositor, inspired by dwm (https://dwm.suckless.org/) and xmonad (https://xmonad.org/)
.IP \[bu] 2
Per-tag state
.IP \[bu] 2
Master/stack(s) left, right and wide layouts
.IP \[bu] 2
Monocle with alternate borders
.IP \[bu] 2
Layout toggling
.IP \[bu] 2
Dwindling, diminishing and even stacks
.IP \[bu] 2
Inner, outer and smart gaps
.PP
.TS
tab(@);
l l l l l.
T{
Layout
T}@T{
Symbol
T}@T{
Master
T}@T{
Stack
T}@T{
Directions
T}
_
T{
Left
T}@T{
\f[CR]│ ├─┤\f[R]
T}@T{
Left
T}@T{
Right
T}@T{
Down, Right
T}
T{
Right
T}@T{
\f[CR]├─┤ │\f[R]
T}@T{
Right
T}@T{
Left
T}@T{
Down, Left
T}
T{
Top
T}@T{
\f[CR]├─┬─┤\f[R]
T}@T{
Top
T}@T{
Bottom
T}@T{
Right, Down
T}
T{
Bottom
T}@T{
\f[CR]├─┴─┤\f[R]
T}@T{
Bottom
T}@T{
Top
T}@T{
Right, Up
T}
T{
Wide
T}@T{
\f[CR]├─┤ ├─┤\f[R]
T}@T{
Mid
T}@T{
Left
T}@T{
Up, Left
T}
T{
T}@T{
T}@T{
T}@T{
Right
T}@T{
Down, Right
T}
T{
Monocle
T}@T{
\f[CR]│ n │\f[R]
T}@T{
All
T}@T{
-
T}@T{
-
T}
.TE
.SH QUICK START
\f[CR]$XDG_CONFIG_HOME/river/init\f[R]
.PP
Set server side decorations.
.PP
Required to display borders on all windows.
.IP
.EX
riverctl rule-add ssd
.EE
.PP
Set the layout generator and start it.
.PP
All defaults shown here, none are required.
.PP
Log file is strongly recommended.
.IP
.EX
# set layout manager
riverctl default-layout wideriver

# start layout manager
wideriver \[rs]
    --layout                       left        \[rs]
    --layout-alt                   monocle     \[rs]
    --stack                        dwindle     \[rs]
    --count-master                 1           \[rs]
    --ratio-master                 0.50        \[rs]
    --count-wide-left              0           \[rs]
    --ratio-wide                   0.35        \[rs]
    --no-smart-gaps                            \[rs]
    --inner-gaps                   0           \[rs]
    --outer-gaps                   0           \[rs]
    --border-width                 2           \[rs]
    --border-width-monocle         0           \[rs]
    --border-width-smart-gaps      0           \[rs]
    --border-color-focused         \[dq]0x93a1a1\[dq]  \[rs]
    --border-color-focused-monocle \[dq]0x586e75\[dq]  \[rs]
    --border-color-unfocused       \[dq]0x586e75\[dq]  \[rs]
    --log-threshold                info        \[rs]
   > \[dq]/tmp/wideriver.${XDG_VTNR}.${USER}.log\[dq] 2>&1 &
.EE
.PP
Create some command mappings e.g.
.IP
.EX
riverctl map normal $mod1 up    send-layout-cmd wideriver \[dq]--layout monocle\[dq]
riverctl map normal $mod1 down  send-layout-cmd wideriver \[dq]--layout wide\[dq]
riverctl map normal $mod1 left  send-layout-cmd wideriver \[dq]--layout left\[dq]
riverctl map normal $mod1 right send-layout-cmd wideriver \[dq]--layout right\[dq]

riverctl map normal $mod1 Space send-layout-cmd wideriver \[dq]--layout-toggle\[dq]

riverctl map normal $mod1 plus  send-layout-cmd wideriver \[dq]--ratio +0.025\[dq]
riverctl map normal $mod1 equal send-layout-cmd wideriver \[dq]--ratio 0.35\[dq]
riverctl map normal $mod1 minus send-layout-cmd wideriver \[dq]--ratio -0.025\[dq]

riverctl map normal $mod2 plus  send-layout-cmd wideriver \[dq]--count +1\[dq]
riverctl map normal $mod2 equal send-layout-cmd wideriver \[dq]--count 1\[dq]
riverctl map normal $mod2 minus send-layout-cmd wideriver \[dq]--count -1\[dq]

riverctl map normal $mod2 e     send-layout-cmd wideriver \[dq]--stack even\[dq]
riverctl map normal $mod2 w     send-layout-cmd wideriver \[dq]--stack dwindle\[dq]
riverctl map normal $mod2 i     send-layout-cmd wideriver \[dq]--stack diminish\[dq]
.EE
.SH EXAMPLE LAYOUTS AND STACKS
.SS Left, Dwindle
\f[CR]riverctl send-layout-cmd wideriver \[dq]--layout left --stack dwindle --count 1 --ratio 0.5\[dq]\f[R]
.IP
.EX
          Master                          Stack
____________________________________________________________
|                            |                             |
|                            |                             |
|                            |              2              |
|                            |                             |
|                            |                             |
|           1                |_____________________________|
|                            |              |              |
|                            |              |      4       |
|                            |      3       |______________|
|                            |              |      |       |
|                            |              |  5   |   6   |
|____________________________|______________|______|_______|
.EE
.PP
The master area occupies half of the available space and contains one view.
.PP
The stack is filled in a diminishing manner in a downward then rightward directions.
.PP
2 may be moved into the master area with \f[CR]riverctl send-layout-cmd wideriver \[dq]--count +1\[dq]\f[R] and will be evenly placed below 1.
.SS Right, Even
\f[CR]riverctl send-layout-cmd wideriver \[dq]--layout right --stack even --count 2 --ratio 0.55\[dq]\f[R]
.IP
.EX
            Stack                       Master              
____________________________________________________________
|                         |                                |
|                         |                                |
|             3           |                1               |
|_________________________|                                |
|                         |                                |
|                         |________________________________|
|             4           |                                |
|_________________________|                                |
|                         |                2               |
|                         |                                |
|             5           |                                |
|_________________________|________________________________|
.EE
.PP
The master area occupies 55% of the available width and contains two views split evenly.
.PP
The stack is split evenly and is filled in a downwards direction.
.SS Wide, Diminish
\f[CR]riverctl send-layout-cmd wideriver \[dq]--layout wide --stack diminish --count 3 --ratio 0.4\[dq]\f[R]
.IP
.EX
          Left Stack               Master                     Right Stack           
________________________________________________________________________________
|          1           |                               |                       |
|______________________|                               |                       |
|                      |                               |          5            |
|          2           |                               |                       |
|                      |                               |_______________________|
|______________________|                               |                       |
|                      |             4                 |          6            |
|                      |                               |                       |
|                      |                               |_______________________|
|          3           |                               |          7            |
|                      |                               |_______________________|
|______________________|_______________________________|__________8____________|
.EE
.PP
The master area occupies 40% of the available with and contains one view.
.PP
The left stack contains 3 views, the right stack the remainder.
.PP
The left and right stacks each occupy 30% of the available width.
.PP
5 may be moved into the master area with \f[CR]riverctl send-layout-cmd wideriver \[dq]--count +1\[dq]\f[R].
4 will be placed at the \[lq]top\[rq] of the stack, below 3.
.SS Monocle
\f[CR]riverctl send-layout-cmd wideriver \[dq]--layout monocle\[dq]\f[R]
.IP
.EX
____________________________________________________________
|                                                          |
|                                                          |
|                                                          |
|                                                          |
|                                                          |
|                            1                             |
|                             2                            |
|                              3                           |
|                               4                          |
|                                5                         |
|                                 6                        |
|__________________________________________________________|
.EE
.PP
Only the currently focused view will be visible.
.SH LAYOUTS
The symbol is the layout name which may be shown in a status bar such as Waybar (https://github.com/Alexays/Waybar)\[cq]s river/layout (https://github.com/Alexays/Waybar/wiki/Module:-River#layout) module.
.PP
Dynamic settings are available via COMMANDS
.PP
\f[I]ratio\f[R] and \f[I]count\f[R] are persisted per tag and shared by all layouts except wide, which has its own values.
.PP
\f[I]stack\f[R] is persisted per tag and shared by all layouts.
.PP
When multiple tags are focused, the state is persisted for only the lowest tag.
.SS Left / Right
One master area occupying the full height of the available area with a stack area to the left or right.
.PP
\f[I]ratio\f[R] is the proportion of the available area occupied by master.
.PP
\f[I]count\f[R] is the number of evenly evenly stacked views in the master area.
.PP
Left: \f[CR]│ ├─┤\f[R] when \f[I]count\f[R] > 0 otherwise \f[CR]│├──┤\f[R]
.PP
Right: \f[CR]├─┤ │\f[R] when \f[I]count\f[R] > 0 otherwise \f[CR]├──┤│\f[R]
.SS Wide
One master area occupying the full height of the available area with a stack area to the left and the right.
.PP
\f[I]ratio\f[R] is the proportion of the available area occupied by master.
Stacks occupy half of the remaining area.
.PP
\f[I]count\f[R] is the number of views in the left stack.
.PP
Master is centred when there are left and right stacks, otherwise it expands into the area that would be occupied the empty stacks.
.PP
\f[CR]├─┤ ├─┤\f[R] when \f[I]count\f[R] > 0 otherwise \f[CR]││  ├─┤\f[R]
.SS Monocle
Only one view is focused, occupying all of the available space.
.PP
\f[CR]│ n │\f[R] with \f[CR]n\f[R] showing number of views only when greater than 1.
.SH STACK ARRANGEMENTS
3 arrangements are available for the stack area.
It is persisted per tag and applied to all layouts for that tag.
See above for an example of each arrangement.
.PP
Stacks follow one or two directions determined by the layout.
.SS Even
This is the \[lq]traditional\[rq] arrangement with uniformly sized stack views.
.PP
Arranged in a column or row in the first stack direction only.
.SS Diminish
Arranged in a column or row in the first stack direction only.
.PP
Height or width diminishes according to the view\[cq]s position in the stack:
.PP
\f[CR]2p / (n\[ha]2 + n)\f[R]
.PP
\f[CR]n\f[R] number of views in the stack
.PP
\f[CR]p\f[R] position in the stack
.SS Dwindle
Arranged in a dwindling manner alternating in both stack directions.
.PP
Each view occupies half the available / remaining area.
.SH GAPS
Gaps, in pixels, between windows may be injected.
They are off by default.
.PP
\f[CR]--inner-gaps\f[R] (\f[CR]i\f[R]) are between windows.
.PP
\f[CR]--outer-gaps\f[R] (\f[CR]o\f[R]) are between the edge of the screen and windows.
.PP
\f[CR]--smart-gaps\f[R] automatically hides the gaps when there is only one view or monocle layout.
.PP
\f[CR]--border-width-smart-gaps\f[R] the border width for when smart gaps hides the gaps, excluding monocle layout.
For a seamless experience, set this to the same value as \f[CR]--border-width-monocle\f[R]
.IP
.EX
 ---------------------------------------------------------- 
| o    o    o    o    o    o    o    o    o    o    o    o |
|    ----------------------     -----------------------    |
| o |                      | i |                       | o |
|   |                      |   |                       |   |
| o |                      | i |                       | o |
|   |                      |    -----------------------    |
| o |                      | i   i   i   i   i   i   i   o |
|   |                      |    -----------------------    |
| o |                      | i |                       | o |
|   |                      |   |                       |   |
| o |                      | i |                       | o |
|    ----------------------     -----------------------    |
| o    o    o    o    o    o    o    o    o    o    o    o |
 ---------------------------------------------------------- 
.EE
.SH OPTIONS
.TP
\f[CR]--layout\f[R] \f[CR]monocle\f[R]|\f[CR]left\f[R]|\f[CR]right\f[R]|\f[CR]top\f[R]|\f[CR]bottom\f[R]|\f[CR]wide\f[R]
Initial layout, default \f[CR]left\f[R].
.TP
\f[CR]--layout-alt\f[R] \f[CR]monocle\f[R]|\f[CR]left\f[R]|\f[CR]right\f[R]|\f[CR]top\f[R]|\f[CR]bottom\f[R]|\f[CR]wide\f[R]
Initial alternate layout, default \f[CR]monocle\f[R].
Use \f[CR]--layout-toggle\f[R] to switch to alternate layout.
.TP
\f[CR]--stack\f[R] \f[CR]even\f[R]|\f[CR]diminish\f[R]|\f[CR]dwindle\f[R]
Initial stacking method, default \f[CR]dwindle\f[R].
.TP
\f[CR]--count-master\f[R] \f[I]count\f[R]
Initial number of views in the master area, default \f[CR]1\f[R], minimum \f[CR]0\f[R].
Does not apply to wide layout.
.TP
\f[CR]--ratio-master\f[R] \f[I]ratio\f[R]
Initial proportion of the width or height the master area occupies, default \f[CR]0.5\f[R], minimum \f[CR]0.1\f[R], maximum \f[CR]0.9\f[R].
Does not apply to wide layout.
.TP
\f[CR]--count-wide-left\f[R] \f[I]count\f[R]
Initial number of views in the wide layout\[cq]s left stack area, default \f[CR]1\f[R], minimum \f[CR]0\f[R].
You may wish to set this to 0 for a more natural or intuitive feel when launching the first two views.
.TP
\f[CR]--ratio-wide\f[R] \f[I]ratio\f[R]
Initial proportion of the width the wide layout\[cq]s master area occupies, default \f[CR]0.35\f[R], minimum \f[CR]0.1\f[R], maximum \f[CR]0.9\f[R].
The default value is best suited to ultrawide monitors, a value of \f[CR]0.5\f[R] may be more useful for 16:9 monitors.
.TP
\f[CR]--(no-)smart-gaps\f[R]
Automatically hides the gaps when there is only one view or monocle layout.
.TP
\f[CR]--inner-gaps\f[R] \f[I]pixels\f[R]
Inner gaps width, default \f[CR]0\f[R], minimum \f[CR]0\f[R].
.TP
\f[CR]--outer-gaps\f[R] \f[I]pixels\f[R]
Outer gaps width, default \f[CR]0\f[R], minimum \f[CR]0\f[R].
.TP
\f[CR]--border-width\f[R] \f[I]pixels\f[R]
Border width for all layouts except monocle, default \f[CR]2\f[R], minimum \f[CR]0\f[R].
.TP
\f[CR]--border-width-monocle\f[R] \f[I]pixels\f[R]
Border width for monocle layout, default \f[CR]0\f[R], minimum \f[CR]0\f[R].
.TP
\f[CR]--border-width-smart-gaps\f[R] \f[I]pixels\f[R]
Border width for when smart gaps hides the gaps for all layouts except monocle, default \f[CR]0\f[R], minimum \f[CR]0\f[R].
Has no effect if \f[CR]--no-smart-gaps\f[R].
.TP
\f[CR]--border-color-focused\f[R] \f[CR]0x\f[R]\f[I]RRGGBB\f[R][\f[I]AA\f[R]]
Border color for focused views in all layouts excluding monocle, default \f[CR]0x93a1a1\f[R].
.TP
\f[CR]--border-color-focused-monocle\f[R] \f[CR]0x\f[R]\f[I]RRGGBB\f[R][\f[I]AA\f[R]]
Border color for focused view in monocle layout, default \f[CR]0x586e75\f[R].
It is recommended to set this to the unfocused color or a darker colour as an always focused border can be distracting.
.TP
\f[CR]--border-color-unfocused\f[R] \f[CR]0x\f[R]\f[I]RRGGBB\f[R][\f[I]AA\f[R]]
Border color for unfocused views in all layouts, default \f[CR]0x586e75\f[R].
Does not apply for monocle layout.
.TP
\f[CR]--log-threshold\f[R] \f[CR]debug\f[R]|\f[CR]info\f[R]|\f[CR]warning\f[R]|\f[CR]error\f[R]
Minimum log level, default \f[CR]info\f[R].
.SH COMMANDS
When multiple tags are focused, the command is applied to and persisted for only the lowest tag.
.TP
\f[CR]--layout\f[R] \f[CR]monocle\f[R]|\f[CR]left\f[R]|\f[CR]right\f[R]|\f[CR]top\f[R]|\f[CR]bottom\f[R]|\f[CR]wide\f[R]
Set layout persistently for the tag, updating the alternate layout.
.TP
\f[CR]--layout-toggle\f[R]
Set layout to the alternate (previous) for the tag.
.TP
\f[CR]--stack\f[R] \f[CR]diminish\f[R]|\f[CR]dwindle\f[R]|\f[CR]dwindle\f[R]
Set stacking method persistently for the tag.
Applies to all layouts for the tag.
.TP
\f[CR]--count\f[R] [\f[CR]+-\f[R]]\f[I]count\f[R]
Increment, decrement or set the master count, minimum \f[CR]0\f[R].
For wide layout this is instead the left stack count.
Discrete value for wide and all other layouts are persisted per tag.
Prefix with \f[CR]+\f[R] to increment, \f[CR]-\f[R] to decrement, or an absolute value.
.TP
\f[CR]--ratio\f[R] [\f[CR]+-\f[R]]\f[I]pixels\f[R]
Increase, decrease or set the master ratio: the proportion of the width or height the master area occupies, minimum \f[CR]0.1\f[R], maximum \f[CR]0.9\f[R].
Discrete tiling and wide values persisted per tag.
Prefix with \f[CR]+\f[R] to increase, \f[CR]-\f[R] to decrease, or an absolute value.
.SH RECIPES
.SS Wide Shuffling
You can \[lq]shuffle\[rq] views through master, focusing the new master using:
.PP
\f[CR]riverctl send-layout-cmd wideriver \[aq]--count +1\[aq] && riverctl focus-view next\[dq]\f[R]
.PP
\f[CR]riverctl send-layout-cmd wideriver \[aq]--count -1\[aq] && riverctl focus-view previous\[dq]\f[R]
.SH FAQ
.SS Name Does Not Always Update
The layout name will not update when there are no views for the selected tags.
This can occurs when setting a tag with no views or changing the layout for a tag with no views.
.PP
This may be resolved with a river enhancement: #1004 (https://github.com/riverwm/river/issues/1002)
.SS Borders Are Not Shown
Please ensure you have enabled server side decorations i.e.\ the borders:
.IP
.EX
riverctl rule-add ssd
.EE
.PP
You can still use client side decorations for specific applications e.g.:
.IP
.EX
riverctl rule-add -app-id audacity csd
.EE
.SS Random Pixels In Gaps When Using Fractional Scaling
This is a known river and wlroots issue: https://codeberg.org/river/river/issues/816
.PP
Workaround: set a river background colour other than default black \f[CR]0x000000\f[R]
.PP
\f[CR]riverctl background-color \[dq]0x010101\[dq]\f[R] is sufficiently close.
.SH ISSUES
.SS Problems
Please raise a Bug Report (https://github.com/alex-courtis/wideriver/issues/new?assignees=&labels=bug&projects=&template=bug_report.yml)
.SS Ideas
Please create a Feature Request (https://github.com/alex-courtis/wideriver/issues/new?assignees=&labels=feature&projects=&template=feature_request.yml)
.SS Questions or Discussions
Please raise an Issue (https://github.com/alex-courtis/wideriver/issues/new)
.SS Contributions
CONTRIBUTING.md is most gratefully appreciated.
.SH SEE ALSO
https://github.com/alex-courtis/wideriver
.SH AUTHORS
Alexander Courtis.
